"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[365],{1365:(ct,u,n)=>{n.r(u),n.d(u,{ShowqrcodeModule:()=>rt});var l=n(6814),s=n(167),x=n(8645),C=n(9773),b=n(4664),E=n(6306),y=n(2096),t=n(4946),p=n(553),h=n(9862);let O=(()=>{class i{constructor(o){this.httpClient=o,this.headers={Authorization:"Bearer "+localStorage.getItem("token")}}getEquipmentForPrm(o){return this.httpClient.get(`${p.N.baseUrl}getEquipmentForPrmQr/${o}`)}addRepairs(o,e){return this.httpClient.post(`${p.N.baseUrl}addRepairs/${e}`,o,{headers:this.headers})}static#t=this.\u0275fac=function(e){return new(e||i)(t.LFG(h.eN))};static#n=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var M=n(6007),P=n(5200),d=n(5219),a=n(6223),m=n(707),f=n(6218),v=n(9378);const S=function(){return{"min-height":"0",height:"50px"}},Z=[{path:"",component:(()=>{class i{constructor(o,e,r,c,g,at,st,dt){this.acRoute=o,this.router=e,this.service=r,this.sharedService=c,this.authen=g,this.msgs=at,this.location=st,this.fb=dt,this.isLoading=!1,this.isSuccess=!1,this.destroy$=new x.x,this.equipment=[],this.cardContent={header:null,subheader:null,description:null,image:null,images:null,location:null,brachinfo:null,budgetyear:null,roomnumber:null},this.onQueryData(),this.onInitForm()}ngOnInit(){this.authen.getUserData().subscribe(o=>{this.role=o.results.role})}onInitForm(){this.cardForm=this.fb.group({description:[null],image:[null]})}onQueryData(){this.param=this.acRoute.params._value.id,this.acRoute.params.pipe((0,C.R)(this.destroy$),(0,b.w)(o=>this.service.getEquipmentForPrm(o.id).pipe((0,E.K)(e=>404===e.status?this.router.navigate(["notfound"]):(0,y.of)({success:!1,message:"\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14\u0e2d\u0e37\u0e48\u0e19\u0e46"}))))).subscribe(o=>{this.logData=o.results,this.equipment=[o.results].map(e=>(e.image=this.sharedService.getImagePath(e.image),this.id=e.id,e)),this.onSetCardContent()})}onSetCardContent(){this.cardContent.header=this.equipment[0].equipment_name,this.cardContent.subheader=this.equipment[0].equipment_id,this.cardContent.image=this.equipment[0].image,this.cardContent.location=this.equipment[0].Location.location_name,this.cardContent.brachinfo=this.equipment[0].Location.branch_info,this.cardContent.roomnumber=this.equipment[0].Location.room_number}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onFileSelected(o){const e=o.target.files[0];if(e)return this.fileImage=e,this.fileImage}onRepir(){this.authen.isLoggedIn().subscribe(r=>{r||(this.sharedService.haveUrl$.next(this.param),this.sharedService.urlStatus$.next(!0),this.router.navigate(["/auth"]))});const o=this.cardForm.getRawValue();if(Object.values(o).every(r=>null==r))return this.msgs.add({severity:"warn",summary:"\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19",detail:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a"});const e=new FormData;e.append("description",o.description),e.append("image",this.fileImage),e.append("requestDate",(new Date).toISOString()),this.service.addRepairs(e,this.id).subscribe(r=>{this.msgs.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}),"user"==this.role?setInterval(()=>{this.router.navigate(["/repirehistory"])},5e3):this.router.navigate(["/repair"])})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(s.gz),t.Y36(s.F0),t.Y36(O),t.Y36(M.F),t.Y36(P.e),t.Y36(d.ez),t.Y36(l.Ye),t.Y36(a.qu))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-showqrcode"]],decls:34,vars:11,consts:[[1,"container"],[1,"contact-box"],[1,"left","mb-5"],["alt","Card",3,"src"],[1,"right"],[1,"text-center","border-y-2","border-green-400","p-3"],[3,"formGroup"],[1,"grid"],[1,"col-12","mt-3"],[1,"text-xl","text-center"],[1,"col-12","mt-2"],[1,"col-12","mb-2",2,"border-bottom","2px solid green"],[1,"text-left","text-xl","ml-2"],[2,"color","red"],["for","images","id","dropcontainer",1,"drop-container"],["type","file","id","images","accept",".png, .jpg, .jpeg","formControlName","image",3,"change"],["type","text","pInputTextarea","","rows","5","cols","30","formControlName","description","placeholder","\u0e01\u0e23\u0e2d\u0e01\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e02\u0e2d\u0e07\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c",1,"w-full",3,"maxLength"],["pButton","","pRipple","","label","\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21",1,"w-full","p-3","text-xl",3,"click"]],template:function(e,r){1&e&&(t._UZ(0,"p-toast"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t._UZ(4,"img",3),t.qZA(),t.TgZ(5,"div",4)(6,"h5",5),t._uU(7),t.qZA(),t.TgZ(8,"form",6)(9,"div",7)(10,"div",8)(11,"p",9),t._uU(12),t.qZA()(),t.TgZ(13,"div",10)(14,"p",9),t._uU(15),t.qZA()(),t.TgZ(16,"div",10)(17,"p",9),t._uU(18),t.qZA()(),t.TgZ(19,"div",10)(20,"p",9),t._uU(21),t.qZA()(),t._UZ(22,"div",11),t.TgZ(23,"div",10)(24,"span",12),t._uU(25,"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e39\u0e1b "),t.TgZ(26,"span",13),t._uU(27,"*"),t.qZA()(),t.TgZ(28,"label",14)(29,"input",15),t.NdJ("change",function(g){return r.onFileSelected(g)}),t.qZA()()(),t.TgZ(30,"div",10),t._UZ(31,"textarea",16),t.qZA()(),t.TgZ(32,"div",8)(33,"button",17),t.NdJ("click",function(){return r.onRepir()}),t.qZA()()()()()()),2&e&&(t.xp6(4),t.s9C("src",r.cardContent.image,t.LSH),t.xp6(3),t.Oqu(r.cardContent.subheader),t.xp6(1),t.Q6J("formGroup",r.cardForm),t.xp6(4),t.hij("\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c : ",r.cardContent.header,""),t.xp6(3),t.Oqu(r.cardContent.location),t.xp6(3),t.Oqu(r.cardContent.brachinfo),t.xp6(3),t.hij("\u0e2b\u0e49\u0e2d\u0e07 ",r.cardContent.roomnumber,""),t.xp6(10),t.Akn(t.DdM(10,S)),t.Q6J("maxLength",150))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,m.Hq,a.sg,a.u,f.g,v.FN],styles:['@charset "UTF-8";  .p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative;flex-direction:row}button[_ngcontent-%COMP%]{background:linear-gradient(to top,#35d0ff 0,#396aff 100%)!important}*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box;font-family:Quicksand,sans-serif}  body{height:100vh;width:100%}.container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center;padding:20px 100px}.container[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;left:0;top:0;background:linear-gradient(to right,#63dbff 0,#4976ff 100%)!important;background-size:cover;z-index:-1}.contact-box[_ngcontent-%COMP%]{max-width:850px;padding:50px 20px 30px 30px;display:grid;grid-template-columns:repeat(2,1fr);justify-content:center;align-items:center;background-color:#fff;box-shadow:0 0 19px 5px #00000030}.left[_ngcontent-%COMP%]{background-size:cover;height:100%;overflow:hidden}.right[_ngcontent-%COMP%]{padding:25px 40px}h2[_ngcontent-%COMP%]{position:relative;padding:0 0 10px;margin-bottom:10px}h2[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;bottom:0;transform:translate(-50%);height:5px;width:200px;border-radius:2px;background-color:#0059ff}.field[_ngcontent-%COMP%]{width:100%;border:2px solid rgba(0,0,0,0);outline:none;background-color:#e6e6e699;padding:.5rem 1rem;font-size:1.1rem;margin-bottom:22px;transition:.3s}.field[_ngcontent-%COMP%]:hover{background-color:#0000001a}textarea[_ngcontent-%COMP%]{min-height:150px}.btn[_ngcontent-%COMP%]{width:100%;padding:.5rem 1rem;background-color:#2ecc71;color:#fff;font-size:1.1rem;border:none;outline:none;cursor:pointer;transition:.3s}.btn[_ngcontent-%COMP%]:hover{background-color:#27ae60}.field[_ngcontent-%COMP%]:focus{border:2px solid rgba(30,85,250,.47);background-color:#fff}.left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:100%;height:100%}.drop-container[_ngcontent-%COMP%]{position:relative;display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;color:#8a8a8a;cursor:pointer;transition:background .2s ease-in-out,border .2s ease-in-out}.drop-container[_ngcontent-%COMP%]:hover{background:#eee;border-color:#bdbdbd}.drop-container[_ngcontent-%COMP%]:hover   .drop-title[_ngcontent-%COMP%]{color:#d4d4d4}input[type=file][_ngcontent-%COMP%]::file-selector-button{margin-right:20px;border:none;background:#3b82f6;padding:10px 20px;border-radius:10px;color:#fff;cursor:pointer;transition:background .2s ease-in-out}input[type=file][_ngcontent-%COMP%]::file-selector-button:hover{background:#3b82f6}#previewImage[_ngcontent-%COMP%]{width:100%}.previewImage[_ngcontent-%COMP%]{padding:10px;border-radius:10px;border:2px dashed #c4c4c4}@media screen and (max-width: 991px){.contact-box[_ngcontent-%COMP%]{grid-template-columns:1fr}.left[_ngcontent-%COMP%]{height:200px;background-size:cover;overflow:hidden}.container[_ngcontent-%COMP%]{padding:20px 40px}}@media screen and (max-width: 667px){.container[_ngcontent-%COMP%]{padding:20px}.right[_ngcontent-%COMP%]{padding:0 30px}.contact-box[_ngcontent-%COMP%]{padding:0 0 20px}}']})}return i})()}];let F=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[s.Bz.forChild(Z),s.Bz]})}return i})();var U=n(5389),z=n(2655),D=n(1532),I=n(4532),T=n(9252),A=n(8057),j=n(3904),$=n(8528),L=n(3965),R=n(5232),J=n(9663),Y=n(354),B=n(5609),N=n(3714),Q=n(9540),G=n(1122),W=n(9844),H=n(4055),V=n(1712),X=n(1230),K=n(74),w=n(1865),q=n(2198),k=n(1913),_=n(9664),tt=n(4844),nt=n(6263),et=n(3259),ot=n(3745),it=n(3514);let rt=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({providers:[d.ez],imports:[l.ez,F,a.u5,T.S,G.$9,_.U$,k.l,K.ml,m.hJ,d.m8,$.S,j.D,L.kW,W.W6,Q.ON,w.cc,X.Q,U.fx,D._8,tt.LU,R.o,A.nD,it.dp,ot.xc,N.j,a.UX,Y.L$,V.U,B.Iu,H.q4,h.JF,I.d,z.w,f.A,v.EV,nt.W,q.q,et.z,J.zz]})}return i})()}}]);