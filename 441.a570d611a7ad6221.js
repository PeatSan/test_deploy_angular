"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[441],{8441:(At,J,a)=>{a.r(J),a.d(J,{RepairModule:()=>Ct});var _=a(6814),m=a(167),e=a(4946),R=a(4532);let O=(()=>{class u{static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-repair"]],decls:3,vars:0,consts:[[1,"c-body"],[1,"m-0","px-4","py-0"]],template:function(n,o){1&n&&(e.TgZ(0,"p-card",0)(1,"p",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[m.lC,R.Z],encapsulation:2})}return u})();const $=[{field:"option",header:""},{field:"username",header:"\u0e0a\u0e37\u0e48\u0e2d\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e1c\u0e39\u0e49\u0e41\u0e08\u0e49\u0e07"},{field:"equipment_id",header:"\u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"},{field:"equipment_name",header:"\u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"},{field:"request_date",header:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"},{field:"status",header:"\u0e2a\u0e16\u0e32\u0e19\u0e30"}],L=[{name:"\u0e23\u0e2d\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07"},{name:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"},{name:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}];var z=a(9846),j=a(6154),G=a(3403),H=a.n(G),r=a(6223),v=a(5619),h=a(553),M=a(9862);let f=(()=>{class u{constructor(t){this.httpClient=t,this.headers={Authorization:"Bearer "+localStorage.getItem("token")},this.mode$=new v.X(null),this.repairStatus$=new v.X(null),this.equipmentId$=new v.X(null),this.repairId$=new v.X(null),this.repairEquipment_pk$=new v.X(null)}getRepairs(t){return this.httpClient.get(`${h.N.baseUrl}getRepairs`,{headers:this.headers,params:t})}getRepairsForPms(t){return this.httpClient.get(`${h.N.baseUrl}getRepairsForPms/${t}`,{headers:this.headers})}addRepairs(t,n){return this.httpClient.post(`${h.N.baseUrl}addRepairs/${n}`,t,{headers:this.headers})}editRepairs(t,n){return this.httpClient.put(`${h.N.baseUrl}editRepairs/${n}`,t,{headers:this.headers})}delRepair(t){return this.httpClient.delete(`${h.N.baseUrl}delRepairs/${t}`,{headers:this.headers})}delRepairs(t){return this.httpClient.delete(`${h.N.baseUrl}delRepairs`,{headers:this.headers,params:{ids:t.join(",")}})}getRepairsForPmsIds(t){return this.httpClient.get(`${h.N.baseUrl}getRepairsForPms`,{headers:this.headers,params:{ids:t.join(",")}})}getEquipment(t){return this.httpClient.get(`${h.N.baseUrl}getEquipment`,{headers:this.headers,params:t})}getEquipmentForPrm(t){return this.httpClient.get(`${h.N.baseUrl}getEquipmentForPrm/${t}`,{headers:this.headers})}static#e=this.\u0275fac=function(n){return new(n||u)(e.LFG(M.eN))};static#t=this.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})();var A=a(6007),c=a(5219),Z=a(707),w=a(3904),T=a(9378),S=a(3965),b=a(1532),q=a(3714),I=a(9663);const X=function(){return{width:"100%","letter-spacing":"1.5px"}},Y=function(){return{width:"100%"}};let V=(()=>{class u{constructor(){this.onSearchEvent=new e.vpe,this.onClearEvent=new e.vpe}onSearch(){this.onSearchEvent.emit()}onClear(){this.onClearEvent.emit()}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-search-form"]],inputs:{searchForm:"searchForm",status:"status"},outputs:{onSearchEvent:"onSearchEvent",onClearEvent:"onClearEvent"},decls:30,vars:14,consts:[[1,"grid",3,"formGroup"],[1,"col-12","md:col-6","lg:col-3","lg:mt-5"],["for","equipmentId",1,"block","text-lg","mb-2"],["mask","9-999-9999-999-9999/99-99(9)","formControlName","equipmentId","placeholder","x-xxx-xxxx-xxx-xxxx/xx-xx(x)"],["for","equipmentName",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentName","placeholder","\u0e01\u0e23\u0e2d\u0e01\u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c",1,"w-full"],[1,"col-12","md:col-6","lg:col-2","lg:mt-5"],["for","status",1,"block","text-lg","mb-2"],["optionLabel","name","placeholder","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e16\u0e32\u0e19\u0e30","formControlName","status",3,"options","showClear"],["for","requestDate",1,"block","text-lg","mb-2"],["formControlName","requestDate","placeholder","\u0e01\u0e23\u0e2d\u0e01\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19",3,"showIcon","showButtonBar"],[1,"col-12","md:col-6","lg:col-4"],["for","username",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","username","placeholder","\u0e01\u0e23\u0e2d\u0e01\u0e0a\u0e37\u0e48\u0e2d\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e1c\u0e39\u0e49\u0e41\u0e08\u0e49\u0e07",1,"w-full"],[1,"gap-2","mt-3","button-panel"],["type","button","label","Success",1,"p-button","p-button-info",3,"click"],[1,"pi","pi-search","ml-2"],["type","button","label","Success",1,"p-button","p-button-warning",3,"click"],[1,"pi","pi-eraser","ml-2"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3," \u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(4,"p-inputMask",3),e.qZA(),e.TgZ(5,"div",1)(6,"label",4),e._uU(7," \u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",6)(10,"label",7),e._uU(11," \u0e2a\u0e16\u0e32\u0e19\u0e30 "),e.qZA(),e._UZ(12,"p-dropdown",8),e.qZA(),e.TgZ(13,"div",1)(14,"label",9),e._uU(15," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(16,"p-calendar",10),e.qZA(),e.TgZ(17,"div",11)(18,"label",12),e._uU(19," \u0e0a\u0e37\u0e48\u0e2d\u0e1a\u0e31\u0e0d\u0e0a\u0e35 \u0e1c\u0e39\u0e49\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(20,"input",13),e.qZA()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(23,"span"),e._uU(24,"\u0e04\u0e49\u0e19\u0e2b\u0e32 "),e._UZ(25,"i",16),e.qZA()(),e.TgZ(26,"button",17),e.NdJ("click",function(){return o.onClear()}),e.TgZ(27,"span"),e._uU(28,"\u0e25\u0e49\u0e32\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 "),e._UZ(29,"i",18),e.qZA()()()),2&n&&(e.Q6J("formGroup",o.searchForm),e.xp6(4),e.Akn(e.DdM(11,X)),e.xp6(8),e.Akn(e.DdM(12,Y)),e.Q6J("options",o.status)("showClear",!0),e.xp6(4),e.Akn(e.DdM(13,Y)),e.Q6J("showIcon",!0)("showButtonBar",!0))},dependencies:[r.Fj,r.JJ,r.JL,S.Lt,b.f,q.o,r.sg,r.u,I.vy],encapsulation:2})}return u})();var D=a(3259),x=a(9664),U=a(6263);function K(u,p){if(1&u&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&u){const t=p.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}function W(u,p){if(1&u&&(e.TgZ(0,"tr")(1,"th",11),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.YNc(3,K,2,1,"th",12),e.qZA()),2&u){const t=p.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function ee(u,p){if(1&u&&(e.ynx(0),e.TgZ(1,"p-tag",18),e._UZ(2,"i",19),e.qZA(),e.BQk()),2&u){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.status)}}function te(u,p){if(1&u&&(e.ynx(0),e.TgZ(1,"p-tag",20),e._UZ(2,"i",21),e.qZA(),e.BQk()),2&u){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.status)}}function ne(u,p){if(1&u&&(e.ynx(0),e.TgZ(1,"p-tag",22),e._UZ(2,"i",23),e.qZA(),e.BQk()),2&u){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.status)}}function ue(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",13),e.qZA(),e.TgZ(3,"td",14)(4,"i",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onDeletInRow(i.id))}),e.qZA(),e.TgZ(5,"i",16),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onEdit(i.id,i.equipment_id,i.status))}),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td"),e.YNc(16,ee,3,1,"ng-container",17),e.YNc(17,te,3,1,"ng-container",17),e.YNc(18,ne,3,1,"ng-container",17),e.qZA()()}if(2&u){const t=p.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(5),e.Oqu(t.users.username),e.xp6(2),e.Oqu(t.equipments.equipment_id),e.xp6(2),e.Oqu(t.equipments.equipment_name),e.xp6(2),e.Oqu(e.xi3(14,8,t.request_date,"dd/MM/yyyy")),e.xp6(3),e.Q6J("ngIf","\u0e23\u0e2d\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07"==t.status),e.xp6(1),e.Q6J("ngIf","\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"==t.status),e.xp6(1),e.Q6J("ngIf","\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"==t.status)}}function oe(u,p){1&u&&(e.TgZ(0,"tr")(1,"td",24),e._uU(2,"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"),e.qZA()())}const ie=function(){return["save"]},ae=function(){return{"min-width":"50rem"}},re=function(){return[5,10,25]};let se=(()=>{class u{constructor(){this.repair=[],this.onEditEvent=new e.vpe,this.onDeleteCheckBoxEvent=new e.vpe,this.onDeleteInRowEvent=new e.vpe,this.onSelectInRowToPrintEvent=new e.vpe}onEdit(t,n,o){this.onEditEvent.emit({id:t,equipmentPk:n,status:o})}onDeletInRow(t){this.onDeleteInRowEvent.emit(t)}onDeleteCheckBox(){this.onDeleteCheckBoxEvent.emit(this.selectCheckBox)}onSelectToPrint(){this.onSelectInRowToPrintEvent.emit(this.selectCheckBox)}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-search-table"]],inputs:{repair:"repair",cols:"cols"},outputs:{onEditEvent:"onEditEvent",onDeleteCheckBoxEvent:"onDeleteCheckBoxEvent",onDeleteInRowEvent:"onDeleteInRowEvent",onSelectInRowToPrintEvent:"onSelectInRowToPrintEvent"},decls:17,vars:12,consts:[[1,"button-panel-end","mb-2","gap-2","mt-5"],["type","button","label","Success",1,"p-button-outlined","p-button",3,"click"],[1,"pi","pi-file-export","ml-2"],["type","button","label","Success",1,"p-button-danger","p-button",3,"click"],[1,"pi","pi-trash","ml-2"],["type","button","label","Success",1,"p-button-success","p-button",3,"routerLink"],[1,"pi","pi-wrench","ml-2"],["currentPageReportTemplate","{first} to {last} of {totalRecords}","responsiveLayout","stack","styleClass","p-datatable-striped",3,"value","paginator","columns","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","4rem"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-center"],["pTooltip","\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25","tooltipPosition","top",1,"pi","pi-trash","cursor-pointer","sm:m-0","md:mr-3","text-red-500","text-lg",3,"click"],["pTooltip","\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07","tooltipPosition","top",1,"pi","pi-info-circle","cursor-pointer","sm:m-0","md:mr-3","text-cyan-300","text-lg",3,"click"],[4,"ngIf"],["severity","info",3,"value"],[1,"pi","pi-spin","pi-spinner",2,"font-size","1rem","margin-right","5px","padding","2px"],["severity","warning",3,"value"],[1,"pi","pi-spin","pi-cog",2,"font-size","1rem","margin-right","5px","padding","2px"],["severity","success",3,"value"],[1,"pi","pi-check-circle",2,"font-size","1rem","margin-right","5px","padding","2px"],["colspan","18",2,"text-align","center"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return o.onSelectToPrint()}),e.TgZ(2,"span"),e._uU(3,"\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19 "),e._UZ(4,"i",2),e.qZA()(),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.onDeleteCheckBox()}),e.TgZ(6,"span"),e._uU(7,"\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 "),e._UZ(8,"i",4),e.qZA()(),e.TgZ(9,"button",5)(10,"span"),e._uU(11,"\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),e._UZ(12,"i",6),e.qZA()()(),e.TgZ(13,"p-table",7),e.NdJ("selectionChange",function(s){return o.selectCheckBox=s}),e.YNc(14,W,4,1,"ng-template",8),e.YNc(15,ue,19,11,"ng-template",9),e.YNc(16,oe,3,0,"ng-template",10),e.qZA()),2&n&&(e.xp6(9),e.Q6J("routerLink",e.DdM(9,ie)),e.xp6(4),e.Q6J("value",o.repair)("paginator",!0)("columns",o.cols)("rows",5)("showCurrentPageReport",!0)("tableStyle",e.DdM(10,ae))("rowsPerPageOptions",e.DdM(11,re))("selection",o.selectCheckBox))},dependencies:[_.sg,_.O5,m.rH,D.u,x.iA,c.jx,x.UA,x.Mo,U.V,_.uU],encapsulation:2})}return u})();function le(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(4);return e.KtG(o.reject())}),e.qZA(),e.TgZ(1,"button",6),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(4);return e.KtG(o.accept())}),e.qZA()}}const pe=function(){return{width:"25vw"}},ce=function(){return{"900px":"50vw","600px":"75vw"}};let me=(()=>{class u{constructor(t,n,o,i,s,E,d){this.fb=t,this.service=n,this.sharedService=o,this.router=i,this.activateRoute=s,this.cfs=E,this.msags=d,this.repair=[],this.cols=$,this.status=L,this.onInitForm()}ngOnInit(){this.queryTable()}onInitForm(){this.searchForm=this.fb.group({equipmentId:[null],equipmentName:[null],status:[null],requestDate:[null],username:[null]})}queryTable(){this.service.getRepairs(this.queryStr).subscribe(t=>{this.repair=t.results.map(n=>(n.image=this.sharedService.getImagePath(n.image),n))})}onSearch(){this.queryStr={};const t=this.searchForm.getRawValue();if(Object.values(t).every(n=>null===n))this.msags.add({severity:"info",summary:"\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19",detail:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e17\u0e35\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e04\u0e49\u0e19\u0e2b\u0e32"});else{if(null!=this.searchForm.get("requestDate").value){const n=new Date(this.searchForm.get("requestDate").value);this.queryStr.requestdate=n.toISOString()}null!=this.searchForm.get("username").value&&(this.queryStr.username=this.searchForm.get("username").value),null!=this.searchForm.get("equipmentId").value&&(this.queryStr.equipmentid=this.searchForm.get("equipmentId").value),null!=this.searchForm.get("equipmentName").value&&(this.queryStr.equipmentname=this.searchForm.get("equipmentName").value),null!=this.searchForm.get("status").value&&(this.queryStr.status=this.searchForm.get("status").value.name),this.service.getRepairs(this.queryStr).subscribe(n=>{this.repair=n.results.map(o=>(o.image=this.sharedService.getImagePath(o.image),o))})}}onClear(){this.searchForm.reset(),this.queryStr=null,this.queryTable()}onEdit(t){this.service.repairId$.next(t.id),this.service.repairStatus$.next(t.status),this.service.repairEquipment_pk$.next(t.equipmentPk),this.router.navigate("\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"==t.status?["status/step2"]:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"==t.status?["status/step3"]:["status"],{relativeTo:this.activateRoute})}onDeleteInRow(t){this.cfs.confirm({message:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?",header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delRepair(t).subscribe(n=>{this.msags.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}),this.queryTable()})}})}onDeleteCheckBox(t){if(void 0===t||0==t.length)return void this.msags.add({severity:"info",summary:"\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19",detail:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e17\u0e35\u0e48\u0e17\u0e48\u0e32\u0e19\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a"});const n=t.map(o=>o.id);this.cfs.confirm({message:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?",header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delRepairs(n).subscribe(o=>{this.msags.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}),this.queryTable()})}})}onSelectToPrint(t){if(console.log(t),null==t)return this.msags.add({severity:"warn",summary:"\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19",detail:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e17\u0e35\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e2d\u0e2d\u0e01\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19"});this.cfs.confirm({message:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?",header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",icon:"pi pi-exclamation-triangle",accept:()=>{const n=new z.default({orientation:"landscape"}),o=j.L,i=n.internal.pageSize.getWidth();n.addFileToVFS("MyFont.ttf",o),n.addFont("MyFont.ttf","MyFont","normal"),n.setFont("MyFont"),n.setFontSize(18),n.text("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 \u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c\u0e04\u0e2d\u0e21\u0e1e\u0e34\u0e27\u0e40\u0e15\u0e2d\u0e23\u0e4c",i/2,15,{align:"center"});let s=t.map(E=>E.id);this.service.getRepairsForPmsIds(s).subscribe(E=>{this.dataTable=E.results.map((d,g)=>[g+1,d.equipments.equipment_id,d.equipments.equipment_name,this.sharedService.onSetFormatDate(d.request_date),d.status]),H()(n,{startY:25,head:[["\u0e25\u0e33\u0e14\u0e31\u0e1a","\u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c","\u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c","\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21","\u0e2a\u0e16\u0e32\u0e19\u0e30"]],body:this.dataTable,styles:{font:"MyFont",fontSize:16},theme:"grid",headStyles:{halign:"center",valign:"middle",fillColor:"gray"},columnStyles:{0:{halign:"center"},1:{halign:"center"},3:{halign:"center"},4:{halign:"center"}}}),n.save("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21.pdf")})}})}static#e=this.\u0275fac=function(n){return new(n||u)(e.Y36(r.qu),e.Y36(f),e.Y36(A.F),e.Y36(m.F0),e.Y36(m.gz),e.Y36(c.YP),e.Y36(c.ez))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-search"]],decls:6,vars:9,consts:[[3,"searchForm","status","onSearchEvent","onClearEvent"],[3,"repair","cols","onEditEvent","onDeleteInRowEvent","onDeleteCheckBoxEvent","onSelectInRowToPrintEvent"],[3,"breakpoints"],["cd",""],["pTemplate","footer"],["type","button","pButton","","label","\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",1,"p-button-danger",3,"click"],["type","button","pButton","","label","\u0e15\u0e01\u0e25\u0e07",1,"p-button-success",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"app-search-form",0),e.NdJ("onSearchEvent",function(){return o.onSearch()})("onClearEvent",function(){return o.onClear()}),e.qZA(),e.TgZ(1,"app-search-table",1),e.NdJ("onEditEvent",function(s){return o.onEdit(s)})("onDeleteInRowEvent",function(s){return o.onDeleteInRow(s)})("onDeleteCheckBoxEvent",function(s){return o.onDeleteCheckBox(s)})("onSelectInRowToPrintEvent",function(s){return o.onSelectToPrint(s)}),e.qZA(),e._UZ(2,"p-toast"),e.TgZ(3,"p-confirmDialog",2,3),e.YNc(5,le,2,0,"ng-template",4),e.qZA()),2&n&&(e.Q6J("searchForm",o.searchForm)("status",o.status),e.xp6(1),e.Q6J("repair",o.repair)("cols",o.cols),e.xp6(2),e.Akn(e.DdM(7,pe)),e.Q6J("breakpoints",e.DdM(8,ce)))},dependencies:[c.jx,Z.Hq,w.Q,T.FN,V,se],encapsulation:2})}return u})();const Ee=[{field:"option",header:"\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 \u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"},{field:"equipment_id",header:"\u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"},{field:"equipment_name",header:"\u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"},{field:"location_name",header:"\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48"},{field:"branch_info",header:"\u0e2a\u0e32\u0e02\u0e32"},{field:"room_number",header:"\u0e2b\u0e49\u0e2d\u0e07"},{field:"buget_year",header:"\u0e1b\u0e35\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13\u0e17\u0e35\u0e48\u0e40\u0e23\u0e34\u0e48\u0e21"},{field:"buget_year",header:"\u0e2a\u0e16\u0e32\u0e19\u0e30"}],de=[{name:"\u0e0b\u0e35\u0e1e\u0e35\u0e22\u0e39"},{name:"\u0e08\u0e2d\u0e04\u0e2d\u0e21\u0e1e\u0e34\u0e27\u0e40\u0e15\u0e2d\u0e23\u0e4c"},{name:"\u0e40\u0e21\u0e32\u0e2a\u0e4c"},{name:"\u0e04\u0e35\u0e1a\u0e2d\u0e23\u0e4c\u0e14"}],ge=[{name:"ST1801"},{name:"ST1802"},{name:"ST1803"},{name:"ST1804"},{name:"ST1805"},{name:"ST1806"},{name:"ST1807"},{name:"ST1808"},{name:"ST1809"}],he=function(){return{width:"100%","letter-spacing":"1.5px"}},F=function(){return{width:"100%"}};let _e=(()=>{class u{constructor(){this.onSearchEvent=new e.vpe,this.onClaerEvent=new e.vpe}onSearch(){this.onSearchEvent.emit()}onClear(){this.onClaerEvent.emit()}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-save-form"]],inputs:{saveForm:"saveForm",equipmentType:"equipmentType",roomNumber:"roomNumber"},outputs:{onSearchEvent:"onSearchEvent",onClaerEvent:"onClaerEvent"},decls:26,vars:19,consts:[[1,"grid",3,"formGroup"],[1,"col-12","md:col-6","lg:col-3","lg:mt-5"],["for","equipmentId",1,"block","text-lg","mb-2"],["mask","9-999-9999-999-9999/99-99(9)","formControlName","equipmentId","placeholder","x-xxx-xxxx-xxx-xxxx/xx-xx(x)"],[1,"col-12","md:col-6","lg:col-4","lg:mt-5"],["for","equipmentName",1,"block","text-lg","mb-2"],["formControlName","equipmentName","appendTo","body","optionLabel","name","placeholder","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c",3,"options","showClear"],[1,"col-12","md:col-6","lg:col-2","lg:mt-5"],["for","roomNumber",1,"block","text-lg","mb-2"],["formControlName","roomNumber","appendTo","body","optionLabel","name","placeholder","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e2b\u0e49\u0e2d\u0e07",3,"options","showClear"],["for","budgetYear",1,"block","text-lg","mb-2"],["formControlName","budgetYear","placeholder","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e1b\u0e35\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13",3,"showIcon","showButtonBar"],[1,"gap-2","mt-3","button-panel"],["type","button","label","Success",1,"p-button","p-button-info",3,"click"],[1,"pi","pi-search","ml-2"],["type","button","label","Success",1,"p-button","p-button-warning",3,"click"],[1,"pi","pi-eraser","ml-2"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3," \u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(4,"p-inputMask",3),e.qZA(),e.TgZ(5,"div",4)(6,"label",5),e._uU(7," \u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(8,"p-dropdown",6),e.qZA(),e.TgZ(9,"div",7)(10,"label",8),e._uU(11," \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e2b\u0e49\u0e2d\u0e07 "),e.qZA(),e._UZ(12,"p-dropdown",9),e.qZA(),e.TgZ(13,"div",1)(14,"label",10),e._uU(15," \u0e1b\u0e35\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13 "),e.qZA(),e._UZ(16,"p-calendar",11),e.qZA()(),e.TgZ(17,"div",12)(18,"button",13),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(19,"span"),e._uU(20,"\u0e04\u0e49\u0e19\u0e2b\u0e32 "),e._UZ(21,"i",14),e.qZA()(),e.TgZ(22,"button",15),e.NdJ("click",function(){return o.onClear()}),e.TgZ(23,"span"),e._uU(24,"\u0e25\u0e49\u0e32\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 "),e._UZ(25,"i",16),e.qZA()()()),2&n&&(e.Q6J("formGroup",o.saveForm),e.xp6(4),e.Akn(e.DdM(15,he)),e.xp6(4),e.Akn(e.DdM(16,F)),e.Q6J("options",o.equipmentType)("showClear",!0),e.xp6(4),e.Akn(e.DdM(17,F)),e.Q6J("options",o.roomNumber)("showClear",!0),e.xp6(4),e.Akn(e.DdM(18,F)),e.Q6J("showIcon",!0)("showButtonBar",!0))},dependencies:[r.JJ,r.JL,S.Lt,b.f,r.sg,r.u,I.vy],encapsulation:2})}return u})();function be(u,p){if(1&u&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&u){const t=p.$implicit;e.xp6(1),e.hij(" ",t.header," ")}}function ve(u,p){if(1&u&&(e.TgZ(0,"tr"),e.YNc(1,be,2,1,"th",5),e.qZA()),2&u){const t=p.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function fe(u,p){if(1&u&&(e.ynx(0),e.TgZ(1,"p-tag",11),e._UZ(2,"i",12),e.qZA(),e.BQk()),2&u){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.status)}}function Ze(u,p){if(1&u&&(e.ynx(0),e.TgZ(1,"p-tag",13),e._UZ(2,"i",14),e.qZA(),e.BQk()),2&u){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.status)}}function Te(u,p){if(1&u&&(e.ynx(0),e.TgZ(1,"p-tag",15),e._UZ(2,"i",16),e.qZA(),e.BQk()),2&u){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.status)}}const xe=function(){return{padding:"8px",background:"linear-gradient(170deg, rgba(255,0,0,1) 31%, rgba(255,199,199,1) 100%, rgba(255,255,255,1) 100%)",border:"rgba(255,0,0,1)"}};function Ce(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"tr",6)(1,"td",7)(2,"p-button",8),e.NdJ("click",function(o){const s=e.CHM(t).$implicit,E=e.oxw();return e.KtG(E.onOpen(o,s.id))}),e._UZ(3,"i",9),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"td"),e.YNc(18,fe,3,1,"ng-container",10),e.YNc(19,Ze,3,1,"ng-container",10),e.YNc(20,Te,3,1,"ng-container",10),e.qZA()()}if(2&u){const t=p.$implicit;e.Q6J("hidden","\u0e08\u0e33\u0e2b\u0e19\u0e48\u0e32\u0e22"==t.status),e.xp6(2),e.Akn(e.DdM(15,xe)),e.xp6(3),e.Oqu(t.equipment_id),e.xp6(2),e.Oqu(t.equipment_name),e.xp6(2),e.Oqu(t.Location.location_name),e.xp6(2),e.Oqu(t.Location.branch_info),e.xp6(2),e.Oqu(t.Location.room_number),e.xp6(2),e.Oqu(e.xi3(16,12,t.budget_year,"dd/MM/yyyy")),e.xp6(3),e.Q6J("ngIf","\u0e08\u0e33\u0e2b\u0e19\u0e48\u0e32\u0e22"==t.status),e.xp6(1),e.Q6J("ngIf","\u0e1b\u0e01\u0e15\u0e34"==t.status),e.xp6(1),e.Q6J("ngIf","\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07"==t.status)}}function Ae(u,p){1&u&&(e.TgZ(0,"tr")(1,"td",17),e._uU(2,"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"),e.qZA()())}const we=function(){return{"min-width":"50rem"}},Se=function(){return[5,10,25]};let ye=(()=>{class u{constructor(){this.onSeletedRepairEvent=new e.vpe}onOpen(t,n){this.onSeletedRepairEvent.emit({e:t,id:n})}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-save-table"]],inputs:{equipments:"equipments",cols:"cols"},outputs:{onSeletedRepairEvent:"onSeletedRepairEvent"},decls:5,vars:10,consts:[[1,"mt-6"],["currentPageReportTemplate","{first} to {last} of {totalRecords}","responsiveLayout","stack","styleClass","p-datatable-striped",3,"value","paginator","columns","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"text-center"],["pTooltip","\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21","tooltipPosition","top",3,"click"],[1,"pi","pi-wrench","cursor-pointer","text-white"],[4,"ngIf"],["severity","danger",3,"value"],[1,"pi","pi-sync",2,"font-size","1rem","margin-right","5px","padding","2px"],["severity","success",3,"value"],[1,"pi","pi-check-circle",2,"font-size","1rem","margin-right","5px","padding","2px"],["severity","warning",3,"value"],[1,"pi","pi-wrench",2,"font-size","1rem","margin-right","5px","padding","2px"],["colspan","18",2,"text-align","center"]],template:function(n,o){1&n&&(e._UZ(0,"div",0),e.TgZ(1,"p-table",1),e.NdJ("selectionChange",function(s){return o.selectCheckBox=s}),e.YNc(2,ve,2,1,"ng-template",2),e.YNc(3,Ce,21,16,"ng-template",3),e.YNc(4,Ae,3,0,"ng-template",4),e.qZA()),2&n&&(e.xp6(1),e.Q6J("value",o.equipments)("paginator",!0)("columns",o.cols)("rows",5)("showCurrentPageReport",!0)("tableStyle",e.DdM(8,we))("rowsPerPageOptions",e.DdM(9,Se))("selection",o.selectCheckBox))},dependencies:[_.sg,_.O5,D.u,x.iA,c.jx,Z.zx,U.V,_.uU],encapsulation:2})}return u})();var y=a(8528),C=a(6218);function Ie(u,p){1&u&&(e.TgZ(0,"h4",4),e._uU(1,"\u0e17\u0e33\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),e.qZA())}const P=function(){return{width:"100%"}};function De(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"label",7),e._uU(3," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.TgZ(4,"span",8),e._uU(5,"(\u0e13 \u0e1b\u0e31\u0e08\u0e38\u0e1a\u0e31\u0e19)"),e.qZA(),e.TgZ(6,"span",9),e._uU(7,"*"),e.qZA()(),e._UZ(8,"p-calendar",10),e.qZA(),e.TgZ(9,"div",6)(10,"label",7),e._uU(11," \u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c \u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.TgZ(12,"span",9),e._uU(13,"*"),e.qZA()(),e._UZ(14,"p-dropdown",11),e.qZA(),e.TgZ(15,"div",12)(16,"label",13)(17,"input",14),e.NdJ("change",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.onFileSelected(o))}),e.qZA()()(),e.TgZ(18,"div",15)(19,"label",16),e._uU(20," \u0e2a\u0e32\u0e40\u0e2b\u0e15\u0e38\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(21,"textarea",17),e.qZA()()}if(2&u){const t=e.oxw();e.Q6J("formGroup",t.viewForm),e.xp6(8),e.Akn(e.DdM(13,P)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0)("appendTo","body"),e.xp6(6),e.Akn(e.DdM(14,P)),e.Q6J("options",t.equipmentType)("showClear",!0),e.xp6(7),e.Q6J("autoResize",!1)}}function Ue(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSave())}),e.TgZ(2,"span"),e._uU(3,"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01 "),e._UZ(4,"i",20),e.qZA()(),e.TgZ(5,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onClose())}),e.TgZ(6,"span"),e._uU(7,"\u0e01\u0e25\u0e31\u0e1a "),e._UZ(8,"i",22),e.qZA()()()}}const Fe=function(){return{width:"65vw"}},ke=function(){return{"960px":"75vw"}};let Ne=(()=>{class u{constructor(){this.file=null,this.onCloseDialogEvent=new e.vpe,this.onSaveEvent=new e.vpe,this.onSelectedFileEvent=new e.vpe}onClose(){this.onCloseDialogEvent.emit()}onSave(){this.onSaveEvent.emit()}onFileSelected(t){const n=t.target.files[0];n&&(this.file=n,this.onSelectedFileEvent.emit(this.file))}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-save-dialog"]],inputs:{visible:"visible",viewForm:"viewForm",equipmentType:"equipmentType"},outputs:{onCloseDialogEvent:"onCloseDialogEvent",onSaveEvent:"onSaveEvent",onSelectedFileEvent:"onSelectedFileEvent"},decls:4,vars:9,consts:[[3,"visible","modal","breakpoints","draggable","resizable","visibleChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"width","100%"],[1,"grid",3,"formGroup"],[1,"col-12","md:col-6","lg:col-3"],["for","budgetYear",1,"block","text-lg","mb-2"],[2,"color","green"],[2,"color","red"],["formControlName","requestDate",3,"showIcon","showButtonBar","showTime","showSeconds","appendTo"],["formControlName","equipmentType","optionLabel","name","placeholder","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2d\u0e38\u0e1b\u0e01\u0e23\u0e13\u0e4c",3,"options","showClear"],[1,"col-12","md:col-12","lg:col-4","lg:mt-5"],["for","images","id","dropcontainer",1,"drop-container"],["type","file","id","images","accept",".png, .jpg, .jpeg","formControlName","image",3,"change"],[1,"col-12","md:col-10","lg:col-12"],["for","description",1,"block","text-lg","mb-2"],["type","text","pInputTextarea","","rows","5","cols","30","formControlName","description","placeholder","\u0e01\u0e23\u0e2d\u0e01\u0e2d\u0e32\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e35\u0e22\u0e02\u0e2d\u0e07\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c",1,"w-full",3,"autoResize"],[1,"gap-2","mt-3","button-panel"],["type","button","label","Success",1,"p-button","p-button-success",3,"click"],[1,"pi","pi-wrench","ml-2"],["type","button","label","Success",1,"p-button","p-button-warning",3,"click"],[1,"pi","pi-reply","ml-2"]],template:function(n,o){1&n&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(s){return o.visible=s}),e.YNc(1,Ie,2,0,"ng-template",1),e.YNc(2,De,22,15,"ng-template",2),e.YNc(3,Ue,9,0,"ng-template",3),e.qZA()),2&n&&(e.Akn(e.DdM(7,Fe)),e.Q6J("visible",o.visible)("modal",!0)("breakpoints",e.DdM(8,ke))("draggable",!1)("resizable",!1))},dependencies:[r.Fj,r.JJ,r.JL,c.jx,y.V,S.Lt,b.f,r.sg,r.u,C.g],styles:[".drop-container[_ngcontent-%COMP%]{position:relative;display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;color:#8a8a8a;cursor:pointer;transition:background .2s ease-in-out,border .2s ease-in-out}.drop-container[_ngcontent-%COMP%]:hover{background:#eee;border-color:#bdbdbd}.drop-container[_ngcontent-%COMP%]:hover   .drop-title[_ngcontent-%COMP%]{color:#d4d4d4}input[type=file][_ngcontent-%COMP%]::file-selector-button{margin-right:20px;border:none;background:#3b82f6;padding:10px 20px;border-radius:10px;color:#fff;cursor:pointer;transition:background .2s ease-in-out}input[type=file][_ngcontent-%COMP%]::file-selector-button:hover{background:#3b82f6}#previewImage[_ngcontent-%COMP%]{width:100%}.previewImage[_ngcontent-%COMP%]{padding:10px;border-radius:10px;border:2px dashed #c4c4c4}@media (max-width: 991px){  .btn-remove{display:flex;justify-items:center;align-items:center}}"]})}return u})(),Be=(()=>{class u{constructor(t,n,o,i){this.fb=t,this.service=n,this.sharedService=o,this.msgs=i,this.equipments=[],this.equipmentType=de,this.roomNumber=ge,this.cols=Ee,this.onInitForm()}ngOnInit(){this.queryTable(),this.onDisable()}queryTable(){this.service.getEquipment(this.query).subscribe(t=>{this.equipments=t.results.map(n=>(n.image=this.sharedService.getImagePath(n.image),n))})}onInitForm(){this.saveForm=this.fb.group({equipmentId:[null,[r.kI.required]],equipmentName:[null],locationName:[null],branchInfo:[null],roomNumber:[null],budgetYear:[null]}),this.dialogForm=this.fb.group({equipmentId:[null,[r.kI.required]],equipmentName:[null],locationName:[null],branchInfo:[null],roomNumber:[null],budgetYear:[null],description:[null,[r.kI.required]],equipmentType:[null,[r.kI.required]],finishDate:[null,[r.kI.required]],requestDate:[null,[r.kI.required]],image:[null,[r.kI.required]]})}onSearch(){if(this.query={},null!=this.saveForm.get("equipmentId").value&&(this.query.equipmentId=this.saveForm.get("equipmentId").value),null!=this.saveForm.get("equipmentName").value&&(this.query.equipmentName=this.saveForm.get("equipmentName").value.name),null!=this.saveForm.get("locationName").value&&(this.query.locationName=this.saveForm.get("locationName").value),null!=this.saveForm.get("branchInfo").value&&(this.query.branchInfo=this.saveForm.get("branchInfo").value),null!=this.saveForm.get("roomNumber").value&&(this.query.roomNumber=this.saveForm.get("roomNumber").value.name),null!=this.saveForm.get("budgetYear").value){const t=new Date(this.saveForm.get("budgetYear").value);this.query.budgetYear=t.toISOString()}this.service.getEquipment(this.query).subscribe(t=>{this.equipments=t.results.map(n=>(n.image=this.sharedService.getImagePath(n.image),n))})}onClear(){this.saveForm.reset(),this.query=null,this.queryTable()}onDisable(){this.dialogForm.get("equipmentId").disable(),this.dialogForm.get("equipmentName").disable(),this.dialogForm.get("locationName").disable(),this.dialogForm.get("branchInfo").disable(),this.dialogForm.get("roomNumber").disable(),this.dialogForm.get("budgetYear").disable()}onOpen(t){this.visible=t.e;const n=t.id;this.service.equipmentId$.next(n),this.dialogForm.get("requestDate").setValue(new Date),this.dialogForm.get("requestDate").disable(),this.service.getEquipmentForPrm(n).subscribe(o=>{this.dialogForm.patchValue({equipmentId:o.results.equipment_id,equipmentName:o.results.equipment_name,locationName:o.results.Location.location_name,branchInfo:o.results.Location.branch_info,roomNumber:o.results.Location.room_number,budgetYear:new Date(o.results.budget_year)})})}onSelectedFile(t){this.fileImage=t}onSave(){const t=this.service.equipmentId$.value;if(this.dialogForm.get("description")?.value&&this.dialogForm.get("equipmentType")?.value){const n=this.dialogForm.getRawValue(),o=new FormData;o.append("requestDate",n.requestDate),o.append("description",`${n.equipmentType.name} \u0e2d\u0e32\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e35\u0e22 : ${n.description}`),o.append("image",this.fileImage),this.service.addRepairs(o,t).subscribe(i=>{this.msgs.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"})}),this.onClose()}else this.msgs.add({severity:"warn",summary:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e14\u0e49",detail:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e40\u0e07\u0e37\u0e48\u0e2d\u0e19\u0e44\u0e02\u0e43\u0e2b\u0e49\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07"})}onClose(){this.dialogForm.reset(),this.visible=!1}static#e=this.\u0275fac=function(n){return new(n||u)(e.Y36(r.qu),e.Y36(f),e.Y36(A.F),e.Y36(c.ez))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-save"]],decls:4,vars:8,consts:[[3,"saveForm","equipmentType","roomNumber","onSearchEvent","onClaerEvent"],[3,"equipments","cols","onSeletedRepairEvent"],[3,"visible","viewForm","equipmentType","onSaveEvent","onCloseDialogEvent","onSelectedFileEvent"]],template:function(n,o){1&n&&(e._UZ(0,"p-toast"),e.TgZ(1,"app-save-form",0),e.NdJ("onSearchEvent",function(){return o.onSearch()})("onClaerEvent",function(){return o.onClear()}),e.qZA(),e.TgZ(2,"app-save-table",1),e.NdJ("onSeletedRepairEvent",function(s){return o.onOpen(s)}),e.qZA(),e.TgZ(3,"app-save-dialog",2),e.NdJ("onSaveEvent",function(){return o.onSave()})("onCloseDialogEvent",function(){return o.onClose()})("onSelectedFileEvent",function(s){return o.onSelectedFile(s)}),e.qZA()),2&n&&(e.xp6(1),e.Q6J("saveForm",o.saveForm)("equipmentType",o.equipmentType)("roomNumber",o.roomNumber),e.xp6(1),e.Q6J("equipments",o.equipments)("cols",o.cols),e.xp6(1),e.Q6J("visible",o.visible)("viewForm",o.dialogForm)("equipmentType",o.equipmentType))},dependencies:[T.FN,_e,ye,Ne],encapsulation:2})}return u})();var Q=a(2198);function Re(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(66);return e.KtG(o.reject())}),e.qZA(),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(66);return e.KtG(o.accept())}),e.qZA()}}function Me(u,p){1&u&&(e.TgZ(0,"h4",43),e._uU(1,"\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"),e.qZA())}function Ye(u,p){if(1&u&&(e.TgZ(0,"div",44)(1,"div",15)(2,"div",45),e._UZ(3,"img",46),e.qZA()()()),2&u){const t=e.oxw();e.xp6(3),e.Q6J("src",t.showImage,e.LSH)}}const Pe=function(){return{"margin-top":"35px"}},k=function(){return{width:"100%"}},Qe=function(){return{width:"25vw"}},Oe=function(){return{"900px":"50vw","600px":"75vw"}},$e=function(){return{width:"65vw"}},Le=function(){return{"960px":"75vw"}};function je(u,p){if(1&u){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(66);return e.KtG(o.reject())}),e.qZA(),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(66);return e.KtG(o.accept())}),e.qZA()}}function Ge(u,p){1&u&&(e.TgZ(0,"h4",44),e._uU(1,"\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"),e.qZA())}function He(u,p){if(1&u&&(e.TgZ(0,"div",45)(1,"div",15)(2,"div",46),e._UZ(3,"img",47),e.qZA()()()),2&u){const t=e.oxw();e.xp6(3),e.Q6J("src",t.showImage,e.LSH)}}const Xe=function(){return{"margin-top":"35px"}},N=function(){return{width:"100%"}},Ve=function(){return{width:"25vw"}},Ke=function(){return{"900px":"50vw","600px":"75vw"}},We=function(){return{width:"65vw"}},et=function(){return{"960px":"75vw"}};function nt(u,p){if(1&u&&(e.TgZ(0,"div",34),e._UZ(1,"img",35),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.Q6J("src",t.showImage,e.LSH)}}const ut=function(){return{"margin-top":"35px"}},B=function(){return{width:"100%"}},ot=[{path:"",component:O,children:[{path:"",component:me,data:{breadcrumb:"\u0e04\u0e49\u0e19\u0e2b\u0e32"}},{path:"save",component:Be,data:{breadcrumb:"\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"}},{path:"status",component:(()=>{class u{constructor(t){this.messageService=t,this.activeIndex=0}onActiveIndexChange(t){this.activeIndex=t}ngOnInit(){this.items=[{label:"\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07",routerLink:""},{label:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23",routerLink:"step2"},{label:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",routerLink:"step3"}]}static#e=this.\u0275fac=function(n){return new(n||u)(e.Y36(c.ez))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-manage"]],decls:3,vars:2,consts:[[1,"card","border-0"],[3,"model","readonly"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"p-steps",1),e.qZA(),e._UZ(2,"router-outlet")),2&n&&(e.xp6(1),e.Q6J("model",o.items)("readonly",!0))},dependencies:[m.lC,Q.R],encapsulation:2})}return u})(),children:[{path:"",component:(()=>{class u{constructor(t,n,o,i,s,E,d){this.router=t,this.activatRout=n,this.service=o,this.fb=i,this.cfs=s,this.msags=E,this.sharedService=d;const g=this.service.repairEquipment_pk$.value;this.repairId=this.service.repairId$.value,null!=g&&null!=this.repairId?(this.service.getEquipmentForPrm(g).subscribe(l=>{this.payload={equipmentId:l.results.equipment_id,equipmentName:l.results.equipment_name,location:l.results.Location.location_name,branchInfo:l.results.Location.branch_info,roomNumber:l.results.Location.room_number,budgetYear:new Date(l.results.budget_year)},this.stepOneForm.patchValue(this.payload),this.stepOneForm.disable()}),this.service.getRepairsForPms(this.repairId).subscribe(l=>{this.payloadRepiar={fullname:`${l.resutls.users.firstname} ${l.resutls.users.lastname}`,description:l.resutls.description,role:"admin"==l.resutls.users.role?"\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25\u0e23\u0e30\u0e1a\u0e1a":"\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19",requestDate:new Date(l.resutls.request_date)},this.repairForm.patchValue(this.payloadRepiar),this.repairForm.disable()})):t.navigate(["/repair"])}ngOnInit(){this.onInitForm(),this.status=this.service.repairStatus$.value,("\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"==this.status||"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"==this.status)&&(this.statusBtn=!0)}onInitForm(){this.stepOneForm=this.fb.group({equipmentId:[null],equipmentName:[null],location:[null],branchInfo:[null],roomNumber:[null],budgetYear:[null]}),this.repairForm=this.fb.group({fullname:[null],description:[null],role:[null],requestDate:[null]})}onAcceptStatus(){const t=this.service.repairId$.value,n={status:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"};this.cfs.confirm({message:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?",header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",icon:"pi pi-wrench",accept:()=>{this.service.editRepairs(n,t).subscribe(o=>{this.msags.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}),this.router.navigate(["step2"],{relativeTo:this.activatRout})})}})}onBack(){this.router.navigate(["/repair"])}onOpenDialog(t){this.visible=t,this.service.getRepairsForPms(this.repairId).subscribe(n=>{this.showImage=this.sharedService.getImagePath(n.resutls.image)})}static#e=this.\u0275fac=function(n){return new(n||u)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(f),e.Y36(r.qu),e.Y36(c.YP),e.Y36(c.ez),e.Y36(A.F))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-step-one"]],decls:71,vars:41,consts:[[1,"p-2"],[1,"grid",3,"formGroup"],[1,"col-12","md:col-6","lg:col-3","lg:mt-5"],["for","equipmentId",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentId",1,"w-full"],["for","equipmentName",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentName",1,"w-full"],["for","location",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","location",1,"w-full"],[1,"col-12","md:col-6","md:m-0","lg:col-3","lg:mt-5"],["for","branchInfo",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","branchInfo",1,"w-full"],[1,"col-12","md:col-6","lg:col-2"],["for","roomNumber",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","roomNumber",1,"w-full"],[1,"col-12","md:col-6","lg:col-3"],["for","budgetYear",1,"block","text-lg","mb-2"],["formControlName","budgetYear",3,"showIcon","showButtonBar","showTime","showSeconds"],[2,"margin-top","30px"],["for","fullname",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","fullname",1,"w-full"],["for","role",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","role",1,"w-full"],["formControlName","requestDate",3,"showIcon","showButtonBar","showTime","showSeconds"],[1,"col-12","md:col-2","lg:mt-5"],["type","button","label","Success",1,"p-button","p-button-info","lg:mt-5",3,"click"],[1,"pi","pi-image","ml-2"],[1,"col-12"],["for","description",1,"block","text-lg","mb-2"],["rows","5","cols","30","pInputTextarea","","formControlName","description"],[1,"gap-2","mt-5","pt-5","button-panel"],["type","button","label","Success",1,"p-button","p-button-info",3,"disabled","click"],[1,"pi","pi-spin","pi-spinner","ml-2"],["type","button","label","Success",1,"p-button",3,"click"],[1,"pi","pi-reply","ml-2"],[3,"breakpoints"],["cd",""],["pTemplate","footer"],[3,"visible","modal","breakpoints","draggable","resizable","visibleChange"],["pTemplate","header"],["pTemplate","body"],["type","button","pButton","","label","\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",1,"p-button-danger",3,"click"],["type","button","pButton","","label","\u0e15\u0e01\u0e25\u0e07",1,"p-button-success",3,"click"],[2,"width","100%"],[1,"grid"],[1,"col-12","md:col-12","lg:col-12","mb-3"],["alt","previewImage","id","previewImage",1,"w-full",3,"src"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 \u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"div",2)(6,"label",3),e._uU(7," \u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11," \u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"div",2)(14,"label",7),e._uU(15," \u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48 "),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",9)(18,"label",10),e._uU(19," \u0e2a\u0e32\u0e02\u0e32 "),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23," \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e2b\u0e49\u0e2d\u0e07 "),e.qZA(),e._UZ(24,"input",14),e.qZA(),e.TgZ(25,"div",15)(26,"label",16),e._uU(27," \u0e1b\u0e35\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13 "),e.qZA(),e._UZ(28,"p-calendar",17),e.qZA()()(),e.TgZ(29,"div",18)(30,"h4"),e._uU(31,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),e.qZA(),e._UZ(32,"hr"),e.qZA(),e.TgZ(33,"div",1)(34,"div",2)(35,"label",19),e._uU(36," \u0e0a\u0e37\u0e48\u0e2d-\u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25 \u0e1c\u0e39\u0e49\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(37,"input",20),e.qZA(),e.TgZ(38,"div",2)(39,"label",21),e._uU(40," \u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 "),e.qZA(),e._UZ(41,"input",22),e.qZA(),e.TgZ(42,"div",2)(43,"label",16),e._uU(44," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(45,"p-calendar",23),e.qZA(),e.TgZ(46,"div",24)(47,"button",25),e.NdJ("click",function(s){return o.onOpenDialog(s)}),e.TgZ(48,"span"),e._uU(49,"\u0e14\u0e39\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"),e._UZ(50,"i",26),e.qZA()()(),e.TgZ(51,"div",27)(52,"label",28),e._uU(53," \u0e2a\u0e32\u0e40\u0e2b\u0e15\u0e38 \u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(54,"textarea",29),e.qZA()(),e.TgZ(55,"div",30)(56,"button",31),e.NdJ("click",function(){return o.onAcceptStatus()}),e.TgZ(57,"span"),e._uU(58,"\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07"),e._UZ(59,"i",32),e.qZA()(),e.TgZ(60,"button",33),e.NdJ("click",function(){return o.onBack()}),e.TgZ(61,"span"),e._uU(62,"\u0e01\u0e25\u0e31\u0e1a "),e._UZ(63,"i",34),e.qZA()()(),e._UZ(64,"p-toast"),e.TgZ(65,"p-confirmDialog",35,36),e.YNc(67,Re,2,0,"ng-template",37),e.qZA(),e.TgZ(68,"p-dialog",38),e.NdJ("visibleChange",function(s){return o.visible=s}),e.YNc(69,Me,2,0,"ng-template",39),e.YNc(70,Ye,4,1,"ng-template",40),e.qZA()),2&n&&(e.Akn(e.DdM(33,Pe)),e.xp6(4),e.Q6J("formGroup",o.stepOneForm),e.xp6(24),e.Akn(e.DdM(34,k)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0),e.xp6(5),e.Q6J("formGroup",o.repairForm),e.xp6(12),e.Akn(e.DdM(35,k)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0),e.xp6(9),e.Akn(e.DdM(36,k)),e.xp6(2),e.ekj("disable-button-primary",1==o.statusBtn),e.Q6J("disabled",o.statusBtn),e.xp6(4),e.Udp("primary-color2","#6366F1"),e.xp6(5),e.Akn(e.DdM(37,Qe)),e.Q6J("breakpoints",e.DdM(38,Oe)),e.xp6(3),e.Akn(e.DdM(39,$e)),e.Q6J("visible",o.visible)("modal",!0)("breakpoints",e.DdM(40,Le))("draggable",!1)("resizable",!1))},dependencies:[r.Fj,r.JJ,r.JL,c.jx,Z.Hq,y.V,w.Q,b.f,q.o,r.sg,r.u,C.g,T.FN],styles:[".p-dialog.p-confirm-dialog .p-confirm-dialog-icon{font-size:1.5rem}.disable-button-primary[_ngcontent-%COMP%]{background-color:var(--blue-300);border:var(--blue-300)}"]})}return u})()},{path:"step2",component:(()=>{class u{constructor(t,n,o,i,s,E,d){this.router=t,this.activatRout=n,this.service=o,this.fb=i,this.cfs=s,this.msags=E,this.sharedService=d;const g=this.service.repairEquipment_pk$.value;this.repairId=this.service.repairId$.value,null!=g&&null!=this.repairId?(this.service.getEquipmentForPrm(g).subscribe(l=>{this.equipmentId=l.results.id,this.payload={equipmentId:l.results.equipment_id,equipmentName:l.results.equipment_name,location:l.results.Location.location_name,branchInfo:l.results.Location.branch_info,roomNumber:l.results.Location.room_number,budgetYear:new Date(l.results.budget_year)},this.stepTwoForm.patchValue(this.payload),this.stepTwoForm.disable()}),this.service.getRepairsForPms(this.repairId).subscribe(l=>{this.payloadRepiar={fullname:`${l.resutls.users.firstname} ${l.resutls.users.lastname}`,description:l.resutls.description,role:"admin"==l.resutls.users.role?"\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25\u0e23\u0e30\u0e1a\u0e1a":"\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19",requestDate:new Date(l.resutls.request_date)},this.repairForm.patchValue(this.payloadRepiar),this.repairForm.disable()})):t.navigate(["/repair"])}ngOnInit(){this.onInitForm()}onInitForm(){this.stepTwoForm=this.fb.group({equipmentId:[null],equipmentName:[null],location:[null],branchInfo:[null],roomNumber:[null],budgetYear:[null]}),this.repairForm=this.fb.group({fullname:[null],description:[null],role:[null],requestDate:[null]})}onProgressStatus(){const t=this.service.repairId$.value,n={status:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",finishDate:new Date,equipmentId:this.equipmentId};this.cfs.confirm({header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",message:"\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e0b\u0e48\u0e2d\u0e21\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 \u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?",icon:"pi pi-wrench",accept:()=>{this.service.editRepairs(n,t).subscribe(o=>{this.msags.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}),this.router.navigate(["/repair/status/step3"])})}})}onBack(){this.router.navigate(["/repair"])}onOpenDialog(t){this.visible=t,this.service.getRepairsForPms(this.repairId).subscribe(n=>{this.showImage=this.sharedService.getImagePath(n.resutls.image)})}static#e=this.\u0275fac=function(n){return new(n||u)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(f),e.Y36(r.qu),e.Y36(c.YP),e.Y36(c.ez),e.Y36(A.F))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-step-two"]],decls:71,vars:39,consts:[[1,"p-2"],[1,"grid",3,"formGroup"],[1,"col-12","md:col-6","lg:col-3","lg:mt-5"],["for","equipmentId",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentId",1,"w-full"],["for","equipmentName",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentName",1,"w-full"],["for","location",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","location",1,"w-full"],[1,"col-12","md:col-6","md:m-0","lg:col-3","lg:mt-5"],["for","branchInfo",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","branchInfo",1,"w-full"],[1,"col-12","md:col-6","lg:col-2"],["for","roomNumber",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","roomNumber",1,"w-full"],[1,"col-12","md:col-6","lg:col-3"],["for","budgetYear",1,"block","text-lg","mb-2"],["formControlName","budgetYear",3,"showIcon","showButtonBar","showTime","showSeconds"],[2,"margin-top","30px"],[1,"col-12","md:col-6","lg:col-4","lg:mt-5"],["for","fullname",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","fullname",1,"w-full"],["for","role",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","role",1,"w-full"],["formControlName","requestDate",3,"showIcon","showButtonBar","showTime","showSeconds"],[1,"col-12","md:col-2","lg:mt-5"],["type","button","label","Success",1,"p-button","p-button-info","lg:mt-5",3,"click"],[1,"pi","pi-image","ml-2"],[1,"col-12"],["for","description",1,"block","text-lg","mb-2"],["rows","5","cols","30","pInputTextarea","","formControlName","description"],[1,"gap-2","mt-5","pt-5","button-panel"],["type","button","label","Success",1,"p-button","p-button-warning",3,"disabled","click"],[1,"pi","pi-spin","pi-cog","ml-2"],["type","button","label","Success",1,"p-button",3,"click"],[1,"pi","pi-reply","ml-2"],[3,"breakpoints"],["cd",""],["pTemplate","footer"],[3,"visible","modal","breakpoints","draggable","resizable","visibleChange"],["pTemplate","header"],["pTemplate","body"],["type","button","pButton","","label","\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",1,"p-button-danger",3,"click"],["type","button","pButton","","label","\u0e15\u0e01\u0e25\u0e07",1,"p-button-success",3,"click"],[2,"width","100%"],[1,"grid"],[1,"col-12","md:col-12","lg:col-12","mb-3"],["alt","previewImage","id","previewImage",1,"w-full",3,"src"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 \u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"div",2)(6,"label",3),e._uU(7," \u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11," \u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"div",2)(14,"label",7),e._uU(15," \u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48 "),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",9)(18,"label",10),e._uU(19," \u0e2a\u0e32\u0e02\u0e32 "),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23," \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e2b\u0e49\u0e2d\u0e07 "),e.qZA(),e._UZ(24,"input",14),e.qZA(),e.TgZ(25,"div",15)(26,"label",16),e._uU(27," \u0e1b\u0e35\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13 "),e.qZA(),e._UZ(28,"p-calendar",17),e.qZA()()(),e.TgZ(29,"div",18)(30,"h4"),e._uU(31,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),e.qZA(),e._UZ(32,"hr"),e.qZA(),e.TgZ(33,"div",1)(34,"div",19)(35,"label",20),e._uU(36," \u0e0a\u0e37\u0e48\u0e2d-\u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25 \u0e1c\u0e39\u0e49\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(37,"input",21),e.qZA(),e.TgZ(38,"div",2)(39,"label",22),e._uU(40," \u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 "),e.qZA(),e._UZ(41,"input",23),e.qZA(),e.TgZ(42,"div",2)(43,"label",16),e._uU(44," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(45,"p-calendar",24),e.qZA(),e.TgZ(46,"div",25)(47,"button",26),e.NdJ("click",function(s){return o.onOpenDialog(s)}),e.TgZ(48,"span"),e._uU(49,"\u0e14\u0e39\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"),e._UZ(50,"i",27),e.qZA()()(),e.TgZ(51,"div",28)(52,"label",29),e._uU(53," \u0e2a\u0e32\u0e40\u0e2b\u0e15\u0e38 \u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(54,"textarea",30),e.qZA()(),e.TgZ(55,"div",31)(56,"button",32),e.NdJ("click",function(){return o.onProgressStatus()}),e.TgZ(57,"span"),e._uU(58,"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"),e._UZ(59,"i",33),e.qZA()(),e.TgZ(60,"button",34),e.NdJ("click",function(){return o.onBack()}),e.TgZ(61,"span"),e._uU(62,"\u0e01\u0e25\u0e31\u0e1a "),e._UZ(63,"i",35),e.qZA()()(),e._UZ(64,"p-toast"),e.TgZ(65,"p-confirmDialog",36,37),e.YNc(67,je,2,0,"ng-template",38),e.qZA(),e.TgZ(68,"p-dialog",39),e.NdJ("visibleChange",function(s){return o.visible=s}),e.YNc(69,Ge,2,0,"ng-template",40),e.YNc(70,He,4,1,"ng-template",41),e.qZA()),2&n&&(e.Akn(e.DdM(31,Xe)),e.xp6(4),e.Q6J("formGroup",o.stepTwoForm),e.xp6(24),e.Akn(e.DdM(32,N)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0),e.xp6(5),e.Q6J("formGroup",o.repairForm),e.xp6(12),e.Akn(e.DdM(33,N)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0),e.xp6(9),e.Akn(e.DdM(34,N)),e.xp6(2),e.ekj("disable-button-primary",1==o.statusBtn),e.Q6J("disabled",o.statusBtn),e.xp6(9),e.Akn(e.DdM(35,Ve)),e.Q6J("breakpoints",e.DdM(36,Ke)),e.xp6(3),e.Akn(e.DdM(37,We)),e.Q6J("visible",o.visible)("modal",!0)("breakpoints",e.DdM(38,et))("draggable",!1)("resizable",!1))},dependencies:[r.Fj,r.JJ,r.JL,c.jx,Z.Hq,y.V,w.Q,b.f,q.o,r.sg,r.u,C.g,T.FN],styles:[".p-dialog.p-confirm-dialog .p-confirm-dialog-icon{font-size:1.5rem}.disable-button-primary[_ngcontent-%COMP%]{background-color:var(--blue-300);border:var(--blue-300)}"]})}return u})(),data:{breadcrumb:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23"}},{path:"step3",component:(()=>{class u{constructor(t,n,o,i,s,E){this.router=t,this.activatRout=n,this.service=o,this.fb=i,this.cfs=s,this.msags=E;const d=this.service.repairEquipment_pk$.value,g=this.service.repairId$.value;null!=d&&null!=g?(this.service.getEquipmentForPrm(d).subscribe(l=>{this.payload={equipmentId:l.results.equipment_id,equipmentName:l.results.equipment_name,location:l.results.Location.location_name,branchInfo:l.results.Location.branch_info,roomNumber:l.results.Location.room_number,budgetYear:new Date(l.results.budget_year)},this.stepTwoForm.patchValue(this.payload),this.stepTwoForm.disable()}),this.service.getRepairsForPms(g).subscribe(l=>{this.payloadRepiar={fullname:`${l.resutls.users.firstname} ${l.resutls.users.lastname}`,description:l.resutls.description,role:"admin"==l.resutls.users.role?"\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25\u0e23\u0e30\u0e1a\u0e1a":"\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19",requestDate:new Date(l.resutls.request_date)},this.repairForm.patchValue(this.payloadRepiar),this.repairForm.disable()})):t.navigate(["/repair"])}ngOnInit(){this.onInitForm()}onInitForm(){this.stepTwoForm=this.fb.group({equipmentId:[null],equipmentName:[null],location:[null],branchInfo:[null],roomNumber:[null],budgetYear:[null]}),this.repairForm=this.fb.group({fullname:[null],description:[null],role:[null],requestDate:[null]})}onBack(){this.router.navigate(["/repair"])}static#e=this.\u0275fac=function(n){return new(n||u)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(f),e.Y36(r.qu),e.Y36(c.YP),e.Y36(c.ez))};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-step-tree"]],decls:62,vars:23,consts:[[1,"p-2"],[1,"grid",3,"formGroup"],[1,"col-12","md:col-6","lg:col-3","lg:mt-5"],["for","equipmentId",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentId",1,"w-full"],["for","equipmentName",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","equipmentName",1,"w-full"],["for","location",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","location",1,"w-full"],[1,"col-12","md:col-6","md:m-0","lg:col-3","lg:mt-5"],["for","branchInfo",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","branchInfo",1,"w-full"],[1,"col-12","md:col-6","lg:col-2"],["for","roomNumber",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","roomNumber",1,"w-full"],[1,"col-12","md:col-6","lg:col-3"],["for","budgetYear",1,"block","text-lg","mb-2"],["formControlName","budgetYear",3,"showIcon","showButtonBar","showTime","showSeconds"],["class","col-12 md:col-12 lg:col-6 mb-3 previewImage",4,"ngIf"],[2,"margin-top","30px"],[1,"col-12","md:col-6","lg:col-4","lg:mt-5"],["for","fullname",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","fullname",1,"w-full"],["for","role",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","role",1,"w-full"],[1,"col-12"],["for","description",1,"block","text-lg","mb-2"],["rows","5","cols","30","pInputTextarea","","formControlName","description"],[1,"col"],[1,"pi","pi-check","text-green-500","text-2xl"],["formControlName","requestDate",3,"showIcon","showButtonBar","showTime","showSeconds"],[1,"gap-2","mt-5","pt-5","button-panel"],["type","button","label","Success",1,"p-button",3,"click"],[1,"pi","pi-reply","ml-2"],[1,"col-12","md:col-12","lg:col-6","mb-3","previewImage"],["alt","previewImage","id","previewImage",3,"src"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 \u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"div",2)(6,"label",3),e._uU(7," \u0e23\u0e2b\u0e31\u0e2a\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11," \u0e0a\u0e37\u0e48\u0e2d\u0e04\u0e23\u0e38\u0e20\u0e31\u0e13\u0e11\u0e4c "),e.qZA(),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"div",2)(14,"label",7),e._uU(15," \u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48 "),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",9)(18,"label",10),e._uU(19," \u0e2a\u0e32\u0e02\u0e32 "),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23," \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e2b\u0e49\u0e2d\u0e07 "),e.qZA(),e._UZ(24,"input",14),e.qZA(),e.TgZ(25,"div",15)(26,"label",16),e._uU(27," \u0e1b\u0e35\u0e07\u0e1a\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13 "),e.qZA(),e._UZ(28,"p-calendar",17),e.qZA(),e.YNc(29,nt,2,1,"div",18),e.qZA()(),e.TgZ(30,"div",19)(31,"h4"),e._uU(32,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),e.qZA(),e._UZ(33,"hr"),e.qZA(),e.TgZ(34,"div",1)(35,"div",20)(36,"label",21),e._uU(37," \u0e0a\u0e37\u0e48\u0e2d-\u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25 \u0e1c\u0e39\u0e49\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(38,"input",22),e.qZA(),e.TgZ(39,"div",2)(40,"label",23),e._uU(41," \u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 "),e.qZA(),e._UZ(42,"input",24),e.qZA(),e.TgZ(43,"div",25)(44,"label",26),e._uU(45," \u0e2a\u0e32\u0e40\u0e2b\u0e15\u0e38 \u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21 "),e.qZA(),e._UZ(46,"textarea",27),e.qZA(),e.TgZ(47,"div",28)(48,"div",19)(49,"h4"),e._uU(50,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e0b\u0e48\u0e2d\u0e21\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08 "),e._UZ(51,"i",29),e.qZA(),e._UZ(52,"hr"),e.qZA(),e.TgZ(53,"div",2)(54,"label",23),e._uU(55," \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19 "),e.qZA(),e._UZ(56,"p-calendar",30),e.qZA()()(),e.TgZ(57,"div",31)(58,"button",32),e.NdJ("click",function(){return o.onBack()}),e.TgZ(59,"span"),e._uU(60,"\u0e01\u0e25\u0e31\u0e1a "),e._UZ(61,"i",33),e.qZA()()()),2&n&&(e.Akn(e.DdM(19,ut)),e.xp6(4),e.Q6J("formGroup",o.stepTwoForm),e.xp6(24),e.Akn(e.DdM(20,B)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0),e.xp6(1),e.Q6J("ngIf",o.showImage),e.xp6(5),e.Q6J("formGroup",o.repairForm),e.xp6(12),e.Akn(e.DdM(21,B)),e.xp6(10),e.Akn(e.DdM(22,B)),e.Q6J("showIcon",!0)("showButtonBar",!0)("showTime",!0)("showSeconds",!0))},dependencies:[_.O5,r.Fj,r.JJ,r.JL,b.f,q.o,r.sg,r.u,C.g]})}return u})(),data:{breadcrumb:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"}}],data:{breadcrumb:"\u0e23\u0e2d\u0e23\u0e31\u0e1a\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07"}}]}];let it=(()=>{class u{static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275mod=e.oAB({type:u});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(ot),m.Bz]})}return u})();var at=a(5389),rt=a(9252),st=a(8057),lt=a(5232),pt=a(354),ct=a(5609),mt=a(9540),Et=a(1122),dt=a(9844),gt=a(4055),ht=a(1712),_t=a(1230),bt=a(74),vt=a(1865),ft=a(1913),Zt=a(4844),Tt=a(3745),qt=a(3514),xt=a(2655);let Ct=(()=>{class u{static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275mod=e.oAB({type:u});static#n=this.\u0275inj=e.cJS({providers:[c.YP,c.ez],imports:[_.ez,it,r.u5,rt.S,Et.$9,x.U$,ft.l,bt.ml,Z.hJ,c.m8,y.S,w.D,S.kW,dt.W6,mt.ON,vt.cc,_t.Q,at.fx,b._8,Zt.LU,lt.o,st.nD,qt.dp,Tt.xc,q.j,r.UX,pt.L$,ht.U,ct.Iu,gt.q4,M.JF,R.d,xt.w,C.A,T.EV,U.W,Q.q,D.z,I.zz]})}return u})()}}]);