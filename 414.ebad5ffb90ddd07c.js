"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[414],{9414:(ye,g,i)=>{i.r(g),i.d(g,{ProfileModule:()=>he});var m=i(6814),c=i(167),t=i(4946),u=i(4532);let y=(()=>{class e{static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:3,vars:0,consts:[[1,"c-body"],[1,"m-0","px-4","py-0"]],template:function(a,o){1&a&&(t.TgZ(0,"p-card",0)(1,"p",1),t._UZ(2,"router-outlet"),t.qZA()())},dependencies:[c.lC,u.Z],encapsulation:2})}return e})();var r=i(6223),C=i(5200),f=i(553),h=i(9862);let T=(()=>{class e{constructor(n){this.httpClient=n,this.headers={Authorization:"Bearer "+localStorage.getItem("token")}}updateEquipment(n,a){return this.httpClient.put(`${f.N.baseUrl}updateUsersUploade/${n}`,a,{headers:this.headers})}getUsersById(n){return this.httpClient.get(`${f.N.baseUrl}getUsersForPms/${n}`,{headers:this.headers})}static#e=this.\u0275fac=function(a){return new(a||e)(t.LFG(h.eN))};static#t=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var E=i(6007),p=i(5219),v=i(3714),x=i(9378);function I(e,l){if(1&e&&(t.TgZ(0,"div",17),t._UZ(1,"img",18),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("src",n.showImage,t.LSH)}}const b=[{path:"",component:y,children:[{path:"",component:(()=>{class e{constructor(n,a,o,s,d,ve){this.fb=n,this.auth=a,this.service=o,this.router=s,this.sharedServic=d,this.msgs=ve,this.file=null,this.auth.getUserData().subscribe(xe=>{this.userId=xe.id})}ngOnInit(){this.onInitForm(),this.service.getUsersById(this.userId).subscribe(n=>{this.userData=n.results,this.showImage=this.sharedServic.getImagePath(n.results.image),this.setValue={firstname:n.results.firstname,lastname:n.results.lastname,username:n.results.username},this.userProfile.patchValue(this.setValue)})}onInitForm(){this.userProfile=this.fb.group({firstname:[null],lastname:[null],username:[null],image:[null]})}onFileSelected(n){const a=n.target.files[0];if(a){this.file=a;const o=new FileReader;o.readAsDataURL(a),o.onload=()=>{this.showImage=o.result}}}onSave(){const n=this.userProfile.getRawValue();Object.values(n).every(o=>null==o)&&alert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e01\u0e23\u0e2d\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e2b\u0e49\u0e04\u0e23\u0e1a");const a=new FormData;a.append("firstname",n.firstname),a.append("lastname",n.lastname),a.append("username",n.username),a.append("image",this.file),this.service.updateEquipment(this.userId,a).subscribe(o=>{this.msgs.add({severity:"success",summary:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",detail:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"})})}onBack(){this.router.navigate(["/"])}static#e=this.\u0275fac=function(a){return new(a||e)(t.Y36(r.qu),t.Y36(C.e),t.Y36(T),t.Y36(c.F0),t.Y36(E.F),t.Y36(p.ez))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-userdata"]],decls:27,vars:2,consts:[[1,"grid","mt-5",3,"formGroup"],[1,"col-12","md:col-4"],["for","fisrtname",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","firstname",1,"w-full"],["for","lastname",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","lastname",1,"w-full"],["for","username",1,"block","text-lg","mb-2"],["type","text","pInputText","","formControlName","username",1,"w-full"],[1,"col-12","md:col-12","lg:col-4"],["for","images","id","dropcontainer",1,"drop-container"],["type","file","id","images","accept",".png, .jpg, .jpeg","formControlName","image",3,"change"],["class","col-12 md:col-12 lg:col-6 mb-3",4,"ngIf"],[1,"button-panel","gap-2","mt-3"],["type","button","label","Success",1,"p-button","p-button-success",3,"click"],[1,"pi","pi-save","ml-2","text-center"],["type","button","label","Success",1,"p-button","p-button-info",3,"click"],[1,"pi","pi-reply","ml-2"],[1,"col-12","md:col-12","lg:col-6","mb-3"],["alt","previewImage","id","previewImage",3,"src"]],template:function(a,o){1&a&&(t.TgZ(0,"form",0)(1,"div",1)(2,"label",2),t._uU(3," \u0e0a\u0e37\u0e48\u0e2d\u0e08\u0e23\u0e34\u0e07 "),t.qZA(),t._UZ(4,"input",3),t.qZA(),t.TgZ(5,"div",1)(6,"label",4),t._uU(7," \u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25 "),t.qZA(),t._UZ(8,"input",5),t.qZA(),t.TgZ(9,"div",1)(10,"label",6),t._uU(11," \u0e0a\u0e37\u0e48\u0e2d\u0e1a\u0e31\u0e0d\u0e0a\u0e35\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49 "),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",8)(14,"label",9)(15,"input",10),t.NdJ("change",function(d){return o.onFileSelected(d)}),t.qZA()()(),t.YNc(16,I,2,1,"div",11),t.qZA(),t.TgZ(17,"div",12)(18,"button",13),t.NdJ("click",function(){return o.onSave()}),t.TgZ(19,"span"),t._uU(20,"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01 "),t._UZ(21,"i",14),t.qZA()(),t.TgZ(22,"button",15),t.NdJ("click",function(){return o.onBack()}),t.TgZ(23,"span"),t._uU(24,"\u0e01\u0e25\u0e31\u0e1a "),t._UZ(25,"i",16),t.qZA()()(),t._UZ(26,"p-toast")),2&a&&(t.Q6J("formGroup",o.userProfile),t.xp6(16),t.Q6J("ngIf",o.showImage))},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,v.o,r.sg,r.u,x.FN],styles:[".drop-container[_ngcontent-%COMP%]{position:relative;display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;color:#8a8a8a;cursor:pointer;transition:background .2s ease-in-out,border .2s ease-in-out}.drop-container[_ngcontent-%COMP%]:hover{background:#eee;border-color:#bdbdbd}.drop-container[_ngcontent-%COMP%]:hover   .drop-title[_ngcontent-%COMP%]{color:#d4d4d4}input[type=file][_ngcontent-%COMP%]::file-selector-button{margin-right:20px;border:none;background:#3b82f6;padding:10px 20px;border-radius:10px;color:#fff;cursor:pointer;transition:background .2s ease-in-out}input[type=file][_ngcontent-%COMP%]::file-selector-button:hover{background:#3b82f6}#previewImage[_ngcontent-%COMP%]{width:30%}.previewImage[_ngcontent-%COMP%]{padding:10px;border-radius:10px;border:2px dashed #c4c4c4}@media (max-width: 991px){#previewImage[_ngcontent-%COMP%]{width:100%}}"]})}return e})()}]}];let F=(()=>{class e{static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(b),c.Bz]})}return e})();var U=i(5389),A=i(2655),Z=i(707),_=i(1532),S=i(9252),P=i(8057),O=i(3904),M=i(4037),D=i(8528),N=i(3965),B=i(5232),J=i(9663),j=i(354),z=i(5609),V=i(6218),R=i(9540),Y=i(1122),Q=i(9844),$=i(4055),L=i(1712),w=i(1230),G=i(74),W=i(1865),X=i(1913),H=i(9664),K=i(4844),k=i(6263),q=i(3259),ee=i(3745),te=i(3514),ne=i(4480),ie=i(3983),ae=i(1604);let fe=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=t.oAB({type:e});static \u0275inj=t.cJS({imports:[m.ez,ne.T,ae.V,ie.p,p.m8]})}return e})(),he=(()=>{class e{static#e=this.\u0275fac=function(a){return new(a||e)};static#t=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[p.ez],imports:[m.ez,F,r.u5,S.S,Y.$9,H.U$,X.l,G.ml,Z.hJ,p.m8,D.S,O.D,N.kW,Q.W6,R.ON,W.cc,w.Q,U.fx,_._8,K.LU,B.o,P.nD,te.dp,ee.xc,v.j,r.UX,j.L$,L.U,z.Iu,$.q4,h.JF,u.d,A.w,V.A,x.EV,q.z,J.zz,M.FI,k.W,fe]})}return e})()}}]);